(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{447:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"快速生成crud"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速生成crud"}},[t._v("#")]),t._v(" 快速生成CRUD")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("DEBUG")]),t._v("模式下可用，确保站点目录有777权限")])]),t._v(" "),a("p",[t._v("快速生成CRUD功能由 系统配置+模板+可视化页面配置来实现。为了灵活适应各种项目结构与实现方式，需做好系统配置与模板编写。")]),t._v(" "),a("p",[t._v("下面将举例一个多应用多版本的实现：")]),t._v(" "),a("blockquote",[a("p",[t._v("假设一个admin应用无版本，demo应用有多个版本，其项目项目目录如下")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("app\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— admin\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— controller\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— Index.php\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— validate\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— demo\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— controller\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v1\n            BaseDemo.php\n            CrudDemo.php\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— v2\n            BaseDemo.php\n            CrudDemo.php\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— validate\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("—— model\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])]),a("h2",{attrs:{id:"_1、系统配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、系统配置"}},[t._v("#")]),t._v(" 1、系统配置")]),t._v(" "),a("p",[t._v("配置文件"),a("code",[t._v("/config/apidoc.php")]),t._v("中，根据你的项目结构设置"),a("RouterLink",{attrs:{to:"/config/#crud"}},[t._v("crud参数")])],1),t._v(" "),a("blockquote",[a("p",[t._v("多应用/多版本需先配置 "),a("RouterLink",{attrs:{to:"/config/#apps"}},[t._v("apps")])],1)]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'crud'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成控制器配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'controller'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\${app[0].folder}\\controller\\${app[1].folder}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'../template/controller'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义的文件生成配置，你也可以像这样添加更多配置项，来生成你所需的文件。当然你的项目如果很简单，没有逻辑层删除此项配置也是可以的")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'service'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\${app[0].folder}\\services'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'../template/service'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成模型配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'model'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\model'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'../template/model'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'default_fields'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'field'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'desc'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'唯一id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'int'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'length'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'default'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'not_null'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'main_key'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'incremental'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'validate'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'query'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'list'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'detail'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'add'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'edit'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'fields_types'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"int"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"tinyint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"float"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"decimal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"char"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"varchar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"point"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成验证器文件配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'validate'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\${app[0].folder}\\validate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'../template/validate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'rules'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'必填'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'rule'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'require'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'缺少必要参数${field}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'数字'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'rule'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'${field}字段类型为数字'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'年龄'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'rule'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'number|between:1,120'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'${field}.number'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'${field}${desc}字段类型为数字'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'${field}.between'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'${field}只能在1-120之间'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成路由")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'route'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'${app[0].folder}\\route\\${app[0].folder}.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'../template/route_${app[0].folder}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br"),a("span",{staticClass:"line-number"},[t._v("60")]),a("br"),a("span",{staticClass:"line-number"},[t._v("61")]),a("br"),a("span",{staticClass:"line-number"},[t._v("62")]),a("br"),a("span",{staticClass:"line-number"},[t._v("63")]),a("br"),a("span",{staticClass:"line-number"},[t._v("64")]),a("br"),a("span",{staticClass:"line-number"},[t._v("65")]),a("br")])]),a("p",[t._v("通过如上配置，我们就可以看到页面上（搜索框后面）有一个 + 号按钮，点击弹出可视化配置窗口，如下")]),t._v(" "),a("p",[a("img",{attrs:{src:"/thinkphp-apidoc/images/apidoc-config_crud.png",alt:"apidoc-config_crud",title:"apidoc-config_crud"}})]),t._v(" "),a("h2",{attrs:{id:"_2、编写模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、编写模板"}},[t._v("#")]),t._v(" 2、编写模板")]),t._v(" "),a("p",[t._v("在项目跟目录创建 "),a("code",[t._v("template")]),t._v("文件夹，并创建配置中的模板文件 "),a("code",[t._v("controller.txt")]),t._v("、"),a("code",[t._v("service.txt")]),t._v("、"),a("code",[t._v("model.txt")]),t._v("、"),a("code",[t._v("validate.txt")]),t._v("、"),a("code",[t._v("route_admn.txt")]),t._v("、"),a("code",[t._v("route_demo.txt")]),t._v("。")]),t._v(" "),a("p",[t._v("模板示例可参考 "),a("a",{attrs:{href:"https://github.com/HGthecode/thinkphp-apidoc-demo/tree/multiApp/template",target:"_blank",rel:"noopener noreferrer"}},[t._v("模板文件示例"),a("OutboundLink")],1),t._v(" ，这里就不贴出来了，这里说说如何编写模板，相信你很快就能上手。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("要领")]),t._v(" "),a("p",[t._v("1、首先自己在项目中实现一个标准通用的Crud。")]),t._v(" "),a("p",[t._v("2、然后把这些文件内容拷贝在对应的"),a("code",[t._v(".txt")]),t._v("模板文件中。")]),t._v(" "),a("p",[t._v("3、用下表变量替换模板中的参数。")])]),t._v(" "),a("h3",{attrs:{id:"模板变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板变量"}},[t._v("#")]),t._v(" 模板变量")]),t._v(" "),a("p",[t._v("在模板中可以使用如下变量，使用方法"),a("code",[t._v("${变量名}")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("变量名")]),t._v(" "),a("th",[t._v("示例值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("title")]),t._v(" "),a("td",[t._v("测试CRUD")]),t._v(" "),a("td",[t._v("页面填入的控制器标题")])]),t._v(" "),a("tr",[a("td",[t._v("controller.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的控制器文件名")])]),t._v(" "),a("tr",[a("td",[t._v("controller.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\controller")]),t._v(" "),a("td",[t._v("控制器命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("controller.use_alias")]),t._v(" "),a("td",[t._v("TestCrudController")]),t._v(" "),a("td",[t._v("控制器别名")])]),t._v(" "),a("tr",[a("td",[t._v("controller.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\controller\\TestCrud")]),t._v(" "),a("td",[t._v("控制器use地址")])]),t._v(" "),a("tr",[a("td",[t._v("list.field")]),t._v(" "),a("td",[t._v("id,name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的列表显示字段")])]),t._v(" "),a("tr",[a("td",[t._v("list.withoutField")]),t._v(" "),a("td",[t._v("update_time,delete_time")]),t._v(" "),a("td",[t._v("列表显示排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("detail.field")]),t._v(" "),a("td",[t._v("id,name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的明细显示字段")])]),t._v(" "),a("tr",[a("td",[t._v("detail.withoutField")]),t._v(" "),a("td",[t._v("update_time,delete_time")]),t._v(" "),a("td",[t._v("明细显示排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("add.field")]),t._v(" "),a("td",[t._v("name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的新增字段")])]),t._v(" "),a("tr",[a("td",[t._v("add.withoutField")]),t._v(" "),a("td",[t._v("id,update_time,delete_time")]),t._v(" "),a("td",[t._v("新增提交排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("edit.field")]),t._v(" "),a("td",[t._v("id,name,age,sex")]),t._v(" "),a("td",[t._v("页面勾选的编辑显示字段")])]),t._v(" "),a("tr",[a("td",[t._v("edit.withoutField")]),t._v(" "),a("td",[t._v("update_time,delete_time")]),t._v(" "),a("td",[t._v("编辑显示排除的字段")])]),t._v(" "),a("tr",[a("td",[t._v("query.annotation")]),t._v(" "),a("td",[t._v('@Apidoc\\Param("name",type="string",desc="姓名")')]),t._v(" "),a("td",[t._v("根据页面勾选查询的字段生成的注释")])]),t._v(" "),a("tr",[a("td",[t._v("query.where")]),t._v(" "),a("td",[t._v("$where=[]; if(!empty($param['name'])){ $where[] = ['name','=',$param['name']]; }")]),t._v(" "),a("td",[t._v("根据页面勾选的查询字段生成的查询条件")])]),t._v(" "),a("tr",[a("td",[t._v("api_class_name")]),t._v(" "),a("td",[t._v("testCrud")]),t._v(" "),a("td",[t._v("api的url所用的控制器名称（其实就是小写开头的控制器名）")])]),t._v(" "),a("tr",[a("td",[t._v("api_group")]),t._v(" "),a("td",[t._v("app\\admin\\controller\\TestCrud")]),t._v(" "),a("td",[t._v("控制器分组所选的分组name")])]),t._v(" "),a("tr",[a("td",[t._v("api_url")]),t._v(" "),a("td",[t._v("/admin/testCrud")]),t._v(" "),a("td",[t._v("控制器api访问的url")])]),t._v(" "),a("tr",[a("td",[t._v("main_key.field")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("页面配置的数据表主键的字段名")])]),t._v(" "),a("tr",[a("td",[t._v("main_key.type")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("页面配置的数据表主键的字段类型")])]),t._v(" "),a("tr",[a("td",[t._v("main_key.desc")]),t._v(" "),a("td",[t._v("唯一id")]),t._v(" "),a("td",[t._v("页面配置的数据表主键的字段说明注释")])]),t._v(" "),a("tr",[a("td",[t._v("model.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的模型文件名")])]),t._v(" "),a("tr",[a("td",[t._v("model.namespace")]),t._v(" "),a("td",[t._v("app\\model")]),t._v(" "),a("td",[t._v("模型命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("model.use_alias")]),t._v(" "),a("td",[t._v("TestCrudModel")]),t._v(" "),a("td",[t._v("模型别名")])]),t._v(" "),a("tr",[a("td",[t._v("model.use_path")]),t._v(" "),a("td",[t._v("app\\model\\TestCrud")]),t._v(" "),a("td",[t._v("模型use地址")])]),t._v(" "),a("tr",[a("td",[t._v("model.table_name")]),t._v(" "),a("td",[t._v("test_crud")]),t._v(" "),a("td",[t._v("表明（不含前缀）")])]),t._v(" "),a("tr",[a("td",[t._v("model.table_prefix")]),t._v(" "),a("td",[t._v('""')]),t._v(" "),a("td",[t._v("表前缀")])]),t._v(" "),a("tr",[a("td",[t._v("model.file_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("文件名称")])]),t._v(" "),a("tr",[a("td",[t._v("validate.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的验证器文件名")])]),t._v(" "),a("tr",[a("td",[t._v("validate.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\validate")]),t._v(" "),a("td",[t._v("验证器命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("validate.use_alias")]),t._v(" "),a("td",[t._v("TestCrudValidate")]),t._v(" "),a("td",[t._v("验证器别名")])]),t._v(" "),a("tr",[a("td",[t._v("validate.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\validate\\TestCrud")]),t._v(" "),a("td",[t._v("验证器use地址")])]),t._v(" "),a("tr",[a("td",[t._v("validate.rule")]),t._v(" "),a("td",[t._v("[ 'id' => 'require','name'=>'require']")]),t._v(" "),a("td",[t._v("页面字段配置验证的验证规则")])]),t._v(" "),a("tr",[a("td",[t._v("validate.message")]),t._v(" "),a("td",[t._v("['id' =>'id不可为空','name'=>'name不可为空']")]),t._v(" "),a("td",[t._v("验证规则的提示内容")])]),t._v(" "),a("tr",[a("td",[t._v("validate.scene.add")]),t._v(" "),a("td",[t._v('["name","sex","age"]')]),t._v(" "),a("td",[t._v("新增场景验证的字段")])]),t._v(" "),a("tr",[a("td",[t._v("validate.scene.edit")]),t._v(" "),a("td",[t._v('["id","name","sex","age"]')]),t._v(" "),a("td",[t._v("编辑场景验证的字段")])]),t._v(" "),a("tr",[a("td",[t._v("validate.scene.delete")]),t._v(" "),a("td",[t._v('["id"]')]),t._v(" "),a("td",[t._v("删除场景验证的字段")])]),t._v(" "),a("tr",[a("td",[t._v("service.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的逻辑层（自定义的）文件名")])]),t._v(" "),a("tr",[a("td",[t._v("service.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\service")]),t._v(" "),a("td",[t._v("逻辑层（自定义的）命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("service.use_alias")]),t._v(" "),a("td",[t._v("TestCrudservice")]),t._v(" "),a("td",[t._v("逻辑层（自定义的）别名")])]),t._v(" "),a("tr",[a("td",[t._v("service.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\service\\TestCrud")]),t._v(" "),a("td",[t._v("逻辑层（自定义的）use地址")])]),t._v(" "),a("tr",[a("td",[t._v("service.file_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("文件名")])])])]),t._v(" "),a("h3",{attrs:{id:"自定义文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义文件"}},[t._v("#")]),t._v(" 自定义文件")]),t._v(" "),a("p",[t._v("如果你的项目需要更多层文件来实现Crud，你只需要在配置文件"),a("code",[t._v("config/apidoc.php")]),t._v("的"),a("code",[t._v("crud")]),t._v("配置项中加入你的配置，如下")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /config/apidoc.php")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'crud'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义的文件生成配置，你也可以像这样添加更多配置项，来生成你所需的文件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'myTest'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\${app[0].folder}\\myTest'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'../template/myTest'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("加入配置后，页面将会多出一个myTest的文件名输入项，并在创建Crud时根据此配置的模板生成文件。同时模板变量里也会多出以下几个变量")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("变量名")]),t._v(" "),a("th",[t._v("示例值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("myTest.class_name")]),t._v(" "),a("td",[t._v("TestCrud")]),t._v(" "),a("td",[t._v("页面填入的自定义的文件名")])]),t._v(" "),a("tr",[a("td",[t._v("myTest.namespace")]),t._v(" "),a("td",[t._v("app\\admin\\myTest")]),t._v(" "),a("td",[t._v("自定义文件的命名空间")])]),t._v(" "),a("tr",[a("td",[t._v("myTest.use_alias")]),t._v(" "),a("td",[t._v("TestCrudmyTest")]),t._v(" "),a("td",[t._v("自定义文件的别名")])]),t._v(" "),a("tr",[a("td",[t._v("myTest.use_path")]),t._v(" "),a("td",[t._v("app\\admin\\myTest\\TestCrud")]),t._v(" "),a("td",[t._v("自定义文件的use地址")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);